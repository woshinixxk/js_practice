(function(){var a={getRandom:function(c,b){c=Math.ceil(c);b=Math.floor(b);return Math.floor(Math.random()*(b-c+1))+c}};window.Tools=a})();(function(){var c="absolute";var f=null;var b=null;var e=[];function d(g){g=g||{};this.color=g.color||"green";this.width=g.width||20;this.height=g.height||20;this.x=g.x||0;this.y=g.y||0}d.prototype.render=function(g){a();var h=document.createElement("div");g.appendChild(h);e.push(h);f=g;b=h;h.style.position=c;h.style.left=this.x+"px";h.style.top=this.y+"px";h.style.width=this.width+"px";h.style.height=this.height+"px";h.style.backgroundColor=this.color};d.prototype.random=function(){if(!f){return}this.x=Tools.getRandom(0,map.offsetWidth/this.width-1)*this.width;this.y=Tools.getRandom(0,map.offsetHeight/this.height-1)*this.height;b.style.left=this.x+"px";b.style.top=this.y+"px"};function a(){for(var g=e.length-1;g>=0;g--){e[g].parentNode.removeChild(e[g]);e.splice(g,1)}}window.Food=d})();(function(){var b="absolute";var d=[];function c(e){e=e||{};this.width=e.width||20;this.height=e.height||20;this.direction=e.direction||"right";this.body=[{x:3,y:2,color:"red"},{x:2,y:2,color:"blue"},{x:1,y:2,color:"blue"}]}c.prototype.render=function(f){a();var e=this;this.body.forEach(function(g){var h=document.createElement("div");f.appendChild(h);d.push(h);h.style.position=b;h.style.left=g.x*e.width+"px";h.style.top=g.y*e.height+"px";h.style.width=e.width+"px";h.style.height=e.height+"px";h.style.backgroundColor=g.color})};c.prototype.move=function(k,j){for(var g=this.body.length-1;g>0;g--){this.body[g].x=this.body[g-1].x;this.body[g].y=this.body[g-1].y}var f=this.body[0];switch(this.direction){case"right":this.body[0].x+=1;break;case"left":this.body[0].x-=1;break;case"top":this.body[0].y-=1;break;case"bottom":this.body[0].y+=1;break}var e=f.x*this.width;var l=f.y*this.height;if(e===k.x&&l===k.y){var h=this.body[this.body.length-1];this.body.push({x:h.x,y:h.y,color:h.color});k.random()}};function a(){for(var e=d.length-1;e>=0;e--){d[e].parentNode.removeChild(d[e]);d.splice(e,1)}}window.Snake=c})();(function(){var c;function d(e){this.food=new Food();this.snake=new Snake();this.map=e;c=this}d.prototype.start=function(){this.food.render(this.map);this.food.random();b();a()};function a(){document.addEventListener("keydown",function(f){switch(f.keyCode){case 37:c.snake.direction="left";break;case 38:c.snake.direction="top";break;case 39:c.snake.direction="right";break;case 40:c.snake.direction="bottom";break}},false)}function b(){var e=setInterval(function(){c.snake.move(c.food,c.map);c.snake.render(c.map);var h=c.map.offsetWidth/c.snake.width;var g=c.map.offsetHeight/c.snake.height;var f=c.snake.body[0].x;var i=c.snake.body[0].y;if(f<0||f>=h){alert("Game Over");clearInterval(e)}if(i<0||i>=g){alert("Game Over");clearInterval(e)}},150)}window.Game=d})();(function(){var b=document.querySelector("#map");var a=new Game(b);a.start()})();